<!DOCTYPE html>
<html ng-app="norApp" lang="en" ng-controller="norCtrl">
<head>
  <meta charset="utf-8">
  <base href="/">
  <title>{{title}}</title>
  <link rel="stylesheet" href="/_libs/datatables.net/css/jquery.dataTables.css">
  <link rel="stylesheet" href="/_libs/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="/_libs/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="/_libs/purecss/pure-min.css">
  <link rel="stylesheet" href="/_libs/nor/nor.css">
  <link rel="stylesheet" href="/style.css">
</head>
<body>

<div id="header">
	<div class="main-menu pure-menu pure-menu-horizontal">
	    <a href="/" class="pure-menu-heading pure-menu-link">{{$app.name}}</a>
	    <ul class="pure-menu-list">
	        <li class="pure-menu-item" ng-repeat="link in $app.menu">
				<nor-link ref="link.$ref" class="pure-menu-link">{{link.title}}</nor-link>
			</li>
	    </ul>
	</div>
</div>

<div id="content">
 <h1>{{title}}</h1>
 <div class="links-menu pure-menu pure-menu-horizontal" ng-if="links && (links.length >= 1)">
    <nor-link ref="link.$ref" class="pure-menu-heading pure-menu-link"><i class="fa fa-arrow-circle-right" aria-hidden="true"></i></nor-link>
    <ul class="pure-menu-list">
        <li class="pure-menu-item" ng-repeat="link in links"><nor-link ref="link.$ref" class="pure-menu-link">{{link.title}}</a></li>
    </ul>
 </div>

 <div ng-switch="getContentType()">
  <div ng-switch-when="form">

	<form name="form" class="pure-form pure-form-aligned" ng-controller="formCtrl" ng-submit="submit(form)">
	    <fieldset>

			<div id="alerts">
				<div class="alert alert-{{alert.type}}" ng-repeat="alert in alerts">
					<a href="#" class="close" data-dismiss="alert" aria-label="close" ng-click="closeAlert(alert)">&times;</a>
					<strong>{{alert.title}}</strong> {{alert.content}}
				</div>
			</div>

	        <div class="pure-control-group" ng-repeat="field in content">
	            <label for="field-{{field.name}}">{{field.label||field.name}}</label>
	            <input id="field-{{field.name}}" ng-model="data[field.name]" name="{{field.name}}" type="{{field.type}}" placeholder="{{field.placeholder||''}}">
	        </div>

	        <div class="pure-controls">
	            <button name="submit" type="submit" class="pure-button pure-button-primary">Submit</button>
	        </div>
	    </fieldset>
	</form>
  </div>

  <div ng-switch-when="table">
	<table datatable="" class="row-border hover">
    <thead>
    <tr>
        <th ng-repeat="cell in $columns">{{$labels[cell] || cell}}</th>
    </tr>
    </thead>
    <tbody>
    <tr ng-repeat="row in content">
        <td ng-repeat="cell in $columns">
			<span ng-if="(cell === '$name') || (cell === '$id')"><nor-link ref="row.$ref">{{row[cell]}}</nor-link></span>
			<span ng-if="!((cell === '$name') || (cell === '$id'))">{{row[cell]}}</span>
		</td>
    </tr>
    </tbody>
	</table>

  </div>

  <div ng-switch-when="record">
	<nor-record keys="keys(content)" content="content"></nor-record>
  </div>

  <div ng-switch-default>
    <p>{{content}}</p>
  </div>

 </div>

</div>

<div id="footer">
</div>

<!-- Scripts -->
<script src="/_libs/jquery/jquery.min.js"></script>
<script src="/_libs/datatables.net/js/jquery.dataTables.js"></script>
<script src="/_libs/angular/angular.min.js"></script>
<script src="/_libs/angular-sanitize/angular-sanitize.min.js"></script>
<script src="/_libs/angular-ui-router/angular-ui-router.min.js"></script>
<script src="/_libs/angular-datatables/angular-datatables.min.js"></script>
<script src="/_libs/bootstrap/js/bootstrap.min.js"></script>
<script src="/_libs/nor/nor.js"></script>

</body>
</html>
